
<!-- 问题详细描述 -->

<div class="question-detail">
	<?php echo $this->question_info['question_detail']; ?>	
</div>

<!-- 答题选项 -->

<?php if($this->question_quiz) { ?>
	<div class="question-quiz">
		<input type="hidden" name="question-quiz-id" value="<?php echo $this->question_quiz['id']; ?>">
		<input type="hidden" name="question-quiz-content" value='<?php echo $this->question_quiz['content']; ?>'>
		<input type="hidden" name="question-quiz-record-id" value="<?php echo $this->question_quiz_record_id; ?>">
		<input type="hidden" name="question-quiz-record-try-count" value="<?php echo $this->try_count; ?>">
		<input type="hidden" name="question-quiz-record-passed" value="<?php echo $this->passed_quiz; ?>">

		<div class="question-quiz-content"></div>
		<div class="question-quiz-content-overlay panel panel-default">
			<?php if($this->passed_quiz) { ?>
				<button type="button" class="close close-question-quiz-content-overlay" aria-label="Close">
				  <span aria-hidden="true">&times;</span>
				</button>
			<?php } ?>
			<div class="question-quiz-answer-result">
				<?php if($this->passed_quiz) { ?>
					<div class="badge answer-success"><i class="glyphicon glyphicon-flag"></i> 答题成功</div>
					<?php if($this->try_count > 1) { ?> 
					<div class="badge">尝试次数：<span class="retry-count"><?php echo $this->try_count; ?></span></div> 
					<?php } ?>
				<?php } else { ?>
					<div class="badge answer-failed"><i class="glyphicon glyphicon-remove"></i> 答题失败</div>
					<?php if($this->try_count > 0) { ?> 
					<div class="badge">尝试次数：<span class="retry-count"><?php echo $this->try_count; ?></span></div> 
					<?php } ?>
				<?php } ?>
			</div>
			<ul class="post-answer-actions">
				<?php if($this->try_count > 0 && !$this->passed_quiz) { ?>
					<li class="post-answer-action retry"><a href="" class="btn btn-danger btn-block" id="retry-question-quiz-normal"><i class="glyphicon glyphicon-repeat"></i> 再答一次试试</a></li>
				<?php } ?>
				<li class="post-answer-action action-view-solution"><a href="" class="btn btn-info btn-block"><i class="glyphicon glyphicon-eye-open"></i> 查看答案详解</a></li>
				<li class="post-answer-action action-post-comment"><a href="" class="btn btn-default btn-block"><i class="glyphicon glyphicon-comment"></i> 参与答题讨论</a></li>
				<li class="post-answer-action action-publish-question"><a href="" class="btn btn-success btn-block"><i class="glyphicon glyphicon-edit"></i> 出题考考别人</a></li>
			</ul>
			
		</div>
	</div>
<?php } else { ?>
	<div class="question-quiz-actions">
		<ul class="question-quiz-action-items">
			<li class="question-quiz-item">
				<a href="javascript:void(0);" class="question-quiz-action answer-question"><i class="md md-comment"></i> 我来回答 (<span><?php echo $this->question_info['answer_count']; ?></span>)</a>	
			</li>
		</ul>
	</div>
<?php } ?>

<div class="question-quiz-results clearfix">
	<?php if(!$this->passed_quiz) { ?>
		<h3 class="question-quiz-result failed">
			<i class="md md-close"></i> 非常遗憾，回答错误！
		</h3>
	<?php } else { ?>
		<h3 class="question-quiz-result success">
			<i class="md md-check"></i> 恭喜你，回答正确！
		</h3>
	<?php } ?>

	<div class="user-quiz-record">
		
		<?php if(!$this->passed_quiz) { ?>
			<span class="question-quiz-action-item"><a href="javascript:void(0);" class="c-white  bgm-red"><i class="md  md-refresh hidden-xs"></i> 重<span class="hidden-xs">新答题试</span>试</a></span> 
		<?php } ?>
		<a href="javascript:void(0);" class="user-quiz-record-message c-bluegray"><i class="md md-chevron-right"></i>答题记录：<span><?php echo $this->try_count; ?></span> 次</a>
		<ul class="user-quiz-record-items clearfix">
			<?php foreach ($this->quiz_record as $key => $record) { ?>
				<li class="user-quiz-record-item">
					<?php if($record['passed']) { ?> 
						<span class="quiz-record-mark success">答题成功</span> 
					<?php } else if($this->question_quiz['countdown'] > 0 and $record['time_spend'] <= 0) { ?>
						<span class="quiz-record-mark timeout">答题超时</span> 
					<?php } else { ?>
						<span class="quiz-record-mark failed">答题失败</span>
					<?php } ?>
					<?php if($record['time_spend'] > 0) { ?>
						，用时 <?php $record['time_spend']; ?> 秒 
					<?php } ?>
					（<?php echo date_friendly($record['start_time'], 604800, 'Y-m-d'); ?>） 
				</li>
			<?php } ?>
		</ul>
	</div>

	<div class="question-quiz-actions">
		<ul class="question-quiz-action-items">
			<li class="question-quiz-action-item view-solution"><a href="javascript:void(0);" class="c-white  bgm-green"><i class="md md-spellcheck hidden-xs"></i> <span class="hidden-xs">查看参考</span>答案</a></li>
			<li class="question-quiz-action-item publish-question"><a href="javascript:void(0);" class="c-white bgm-bluegray"><i class="md md-comment hidden-xs"></i> <span class="hidden-xs">参与答题</span>讨论</a></li>
			<li class="question-quiz-action-item publish-question"><a href="javascript:void(0);" class="c-white bgm-lightblue"><i class="md md-create hidden-xs"></i> 出题<span class="hidden-xs">考考别人</span></a></li>
			<li class="question-quiz-action-item email-invite"><a href="javascript:void(0);" class="c-white bgm-deeppurple"><i class="md md-email hidden-xs"></i> 邀请<span class="hidden-xs">朋友答题</span></a></li>
		</ul>
	</div>

	<ul class="question-quiz-result-items">
		<?php if($this->try_count > 0 && !$this->passed_quiz) { ?>
			<li class="question-quiz-result-item">
				<a href="javascript:void(0);" class="btn btn-danger btn-block" id="retry-question-quiz-normal"><i class="glyphicon glyphicon-repeat"></i> 重新答题</a>
			</li>
		<?php } else { ?>
		<?php } ?>
	</ul>
</div>

<?php if ($this->question_info['attachs']) {  ?>
<div class="aw-upload-img-list">
<?php foreach ($this->question_info['attachs'] AS $attach) { ?>
<?php if ($attach['is_image'] AND (!$this->question_info['attachs_ids'] OR !in_array($attach['id'], $this->question_info['attachs_ids']))) { ?>
	<a href="<?php echo $attach['attachment']; ?>" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="<?php echo $attach['attachment']; ?>" class="img-thumbnail" alt="<?php echo $attach['file_name']; ?>" /></a>
<?php } ?>
<?php } ?>
</div>
<?php } ?>